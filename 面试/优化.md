# 优化
## CSS 性能

- 首屏使用内联样式
- link标签写在前面
- 资源压缩
- 合理使用选择器，避免过多嵌套
- 减少使用昂贵的属性，多使用transform
- 不要使用@import
- 使用雪碧图



## 打包体积和网络传输

- 优化打包体积

​	利用一些工具压缩、混淆最终打包代码，减少包体积

- 多目标打包

​	利用一些打包插件，针对不同的浏览器打包出不同的兼容性版本，这样一来，每个版本中的兼容性代码就会大大减少，从而减少包体积

- tree shaking，对没有使用的导出模块标记清除，仅支持import静态语句（因为编译阶段就知道用了什么模块）

- webpack作用域提升，将不同的模块合并，减少代码体积

- 压缩

​	gzip，现代浏览器普遍支持压缩格式，因此服务端的各种文件可以压缩后再响应给客户端，只要解压时间小于优化的传输时间，压缩就是可行的

- CDN

​	利用 CDN 可以大幅缩减静态资源的访问时间，特别是对于公共库的访问，可以使用知名的 CDN 资源，这样可以实现跨越站点的缓存

- 缓存

​	对于除 HTML 外的所有静态资源均可以开启协商缓存，利用构建工具打包产生的文件 hash 值来置换缓存

- http2

​	开启 http2 后，利用其多路复用、头部压缩等特点，充分利用带宽传递大量的文件数据

- 雪碧图

​	对于不使用 HTTP2 的场景，可以将多个图片合并为雪碧图，以达到减少文件的目的

- defer、async

​	通过 defer 和 async 属性，可以让页面尽早加载 js 文件

- prefetch、preload

​	通过 prefetch 属性，可以让页面在空闲时预先下载其他页面可能要用到的资源

​	通过 preload 属性，可以让页面预先下载本页面可能要用到的资源

- 多个静态资源域

​	对于不使用 HTTP2 的场景，将相对独立的静态资源分到多个域中保存，可以让浏览器同时开启多个 TCP 连接，并行下载

## 打包速度

1. noParse（排除掉已经打包的第三方库）

2. externals（配置CDN）

3. 限制 loader 的范围

4.  开启 loader 缓存（cache-loader）

5.  开启多线程编译（thread-loader）

6. 热替换（HMR）



## 首屏加载时间

- CDN
- 设置浏览器缓存
- 开启 gzip 压缩，通常开启 gzip 压缩能够有效的缩小传输资源的大小。
- 使用http2
- 组件懒加载
- 预渲染，添加骨架框
- 按需引入第三方库
- 图片懒加载
- 使用 svg
- 服务端渲染



## vue 性能

- 尽量减少 data 中的数据，data 中的数据都会增加 getter 和 setter，会收集对应的 watcher, 或使用Object.freeze

- v-if 和 v-for 不能连用

- 如果需要使用 v-for 给每项元素绑定事件时使用事件代理

- SPA 页面采用 keep-alive 缓存组件

- 在更多的情况下，使用 v-if 替代 v-show

- key 保证唯一

- 使用路由懒加载、异步组件

  

## react 性能优化

  - 导致重复渲染的原因
    1. 在 React 中当组件的状态发生变化，就会重复渲染，这是 React 中组件更新的的内部机制，也是引起组件重复渲染的根本原因
    2. 当父组件重复渲染时，它的子组件都会跟着重新渲染。
    3. 当在使用 Context 时，如果 Context Provider 提供的 value 发生变化时，在所有使用 Context 数据的组件就会导致重复渲染，即使组件中只使用了
       Context 中的部分数据也会导致重复渲染
    4. 在组件中使用 hook 时，当 hook 中状态发生变化，会导致组件的重复渲染
  - 避免重复渲染的方法
    1. 通过组合防止不必要的重复渲染
       - 不要在渲染函数中创建组件
       - move state down： 把经常由于状态变化而经常重复渲染的部分单独封装成子组件，避免影响其他组件
       - components as props： 把经常变的或者不变的部分提出来作为props传入
    2. 通过React.memo创造高阶组件避免不必要的重复渲染
       如果props不变化（可以用useMemo），就不会渲染组件
    3. 使用useMemo缓存context的数据
    4. 细分context的数据，变和不变的分别成两个context



## SEO

- 重要的内容有限加载
- tdk
- 语义化标签
- 提高加载速度
- 扁平化结构
- 图片超链接
- 内链和外链
